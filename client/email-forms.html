<template name="emailFormsTemplate">
  {{> insertUpdateTemplate form=form data=data }}
</template>

<template name="emailForms">
  <div class="container-fluid">
    <div class="row mb-4 mt-4">
      <div class="col-3">
        <select id="templatepicker"></select>
      </div>
      <div class="col"></div>
      {{#unless selected}}
        <div class="col-2">
          <button class="btn btn-light"
            data-action="new-template">{{__ ".new_template"}}</button>
        </div>
      {{else}}
        <div class="col-2">
          <button class="btn btn-light"
            data-action="remove-template">{{__ ".remove_template"}}</button>
        </div>
        <div class="col-1"></div>
        <div class="col-2">
          <button class="btn btn-light"
            data-action="preview-template">{{__ ".preview_template"}}</button>
        </div>
      {{/unless}}
    </div>
    <div class="row">
      <div class="col-md-12">
        {{> emailFormsTemplate selected}}
      </div>
    </div>
  </div>
</template>

<template name="emailFormsPreview">
  <strong>{{__ ".from"}}:</strong> {{from}}<br>
  <strong>{{__ ".to"}}:</strong> {{to}}<br>
  <strong>{{__ ".subject"}}:</strong> {{subject}}<br>
  <hr>
  <p>
    <pre>
      {{text}}
    </pre>
  </p>
  <hr>
  <h4>{{__ ".available_contexts"}}</h4>
  <ul>
    {{#each contexts}}
      <li>
        <strong>{{__ ".name"}}:</strong> {{name}}<br>
        <strong>{{__ ".namespace"}}:</strong> {{namespace}}<br>
        <strong>{{__ ".variables"}}:</strong><br>
        <ul>
          {{#each variables}}
            <li><strong>{{name}}</strong> : {{description}}</li>
          {{/each}}
        </ul>
      </li>
    {{/each}}
  </ul>
</template>
